(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(55)},38:function(e,t,a){},39:function(e,t,a){},42:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);a(33);var n=a(1),l=a(18),s=a(8),r=a(9),o=a(11),i=a(10),c=a(12),u=a(74),p=a(69),m=a(61),h=a(56),f=a(67),g=a(68),d=a(70),E=(a(38),a(76)),v=a(57),b=a(58),y=a(59),O=a(60),k=a(14),j=a(6),C=a.n(j),w=a(20),x=a.n(w),S=a(21),A=a.n(S),L="http://localhost:3001/",P=a(62),D=a(63),N=a(64),T=a(65),M=a(66),B=(a(39),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e){return void 0!==e.value&&!isNaN(e.value)}},{key:"render",value:function(){return n.createElement("span",null,this.props.value>=.1&&n.createElement(h.a,{className:"percUp"},n.createElement(k.b,{size:"0.8em"}),this.props.value.toFixed(1),"%"),this.props.value<=-.1&&n.createElement(h.a,{className:"percDown"},n.createElement(k.a,{size:"0.8em"}),this.props.value.toFixed(1),"%"))}}]),t}(n.Component)),F=(a(42),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("div",{className:"loaderBar"}))}}]),t}(n.Component));x()(C.a);var I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!0,hasData:!1,isOpen:!1,chartOptionsAndData:{},error:!1,errorMessage:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"toggle",value:function(){this.state.isOpen||this.loadChart(),this.setState({isOpen:!this.state.isOpen})}},{key:"loadChart",value:function(){var e=this;fetch("".concat(L,"post/getChart/").concat(this.props.post.path)).then(function(t){return t.ok?t.json():(t.bodyUsed?t.json().then(function(t){e.setState({error:!0,errorMessage:t.message})}):e.setState({error:!0,errorMessage:t.statusText}),null)}).then(function(t){if(null!==t){var a={chart:{type:"spline",zoomType:"x",panning:!0,panKey:"shift",resetZoomButton:{position:{align:"left",verticalAlign:"top",x:0,y:-10}}},yAxis:[{labels:{style:{color:C.a.getOptions().colors[7]}},title:{text:"Likes",style:{color:C.a.getOptions().colors[7]}}},{labels:{style:{color:C.a.getOptions().colors[9]}},title:{text:"Comments",style:{color:C.a.getOptions().colors[9]}},opposite:!0}],xAxis:{type:"datetime",showFirstLabel:!0},series:[{name:"Likes",type:"spline",data:t.likesArr,color:C.a.getOptions().colors[1]},{name:"Comments",type:"spline",data:t.commentsArr,yAxis:1,color:C.a.getOptions().colors[9]}],plotOptions:{spline:{marker:{enabled:!1}}},credits:{enabled:!1},exporting:{enabled:!1},title:{text:null},subtitle:{text:null}};e.setState({isLoading:!1,hasData:t.likesArr.length>0||t.commentsArr.length>0,chartOptionsAndData:a})}else e.setState({isLoading:!1})})}},{key:"render",value:function(){var e=this;return n.createElement("span",{onClick:function(t){e.toggle(),t.preventDefault()}},this.props.children,n.createElement(E.a,{size:"lg",toggle:function(){return e.toggle()},isOpen:this.state.isOpen,fade:!0,keyboard:!0},n.createElement(v.a,{toggle:function(){return e.toggle()}},n.createElement("a",{href:"https://instagram.com/p/"+this.props.post.path,target:"_new"},this.props.post.path," ",n.createElement(k.c,{size:"0.8em"}))),n.createElement(b.a,null,this.state.isLoading&&!this.state.error&&n.createElement(F,null),!this.state.isLoading&&!this.state.hasData&&n.createElement(h.a,null,"No data available"),this.state.error&&n.createElement(y.a,{color:"danger"},this.state.errorMessage),!this.state.isLoading&&!this.state.error&&this.state.hasData&&n.createElement(A.a,{highcharts:C.a,options:this.state.chartOptionsAndData,callback:function(t){if(!e.state.isLoading&&e.state.hasData&&window.innerWidth<800)for(var a=0;a<t.yAxis.length;a++)t.yAxis[a].update({visible:!1})}})),n.createElement(O.a,null,n.createElement(m.a,{color:"default",onClick:function(){return e.toggle()}},"Close"))))}}]),t}(n.Component),z=(a(50),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.posts.map(function(e){return n.createElement("tr",{key:e.path},n.createElement("td",null,n.createElement(I,{post:e},n.createElement("a",{href:"#"+e.path},e.path)),n.createElement("br",null),n.createElement("small",null,0===e.published?"today":e.published+(e.published>1?" days ":" day ")+" ago")),n.createElement("td",null,"Likes: ",e.likeCount.toLocaleString("pt-BR"),"\xa0",n.createElement(B,{value:e.likePercentage}),n.createElement("br",null),"Comments: ",e.commentCount.toLocaleString("pt-BR"),"\xa0",n.createElement(B,{value:e.commentPercentage})))});return n.createElement("div",null,n.createElement("table",{className:"table table-bordered"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",{className:"postPathCol"},"Post"),n.createElement("td",null,"Stats"))),n.createElement("tbody",null,e)))}}]),t}(n.Component)),W=(a(51),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!0,hasData:!1,list1:[],list2:[],list3:[],activeTab:"1",error:!1,errorMessage:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"toggle",value:function(e){this.setState({activeTab:e})}},{key:"loadData",value:function(){var e=this;fetch("".concat(L,"post/getStats/").concat(this.props.profile.username,"?limit=30")).then(function(t){return t.ok?t.json():(t.bodyUsed?t.json().then(function(t){e.setState({error:!0,errorMessage:t.message})}):e.setState({error:!0,errorMessage:t.statusText}),null)}).then(function(t){null!==t?e.setState({isLoading:!1,hasData:t.topInteraction.length>0||t.topLikes.length>0||t.topComments.length>0,list1:t.topInteraction,list2:t.topLikes,list3:t.topComments,activeTab:"1"}):e.setState({isLoading:!1})})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return n.createElement("div",null,this.state.isLoading&&!this.state.error&&n.createElement(F,null),this.state.error&&n.createElement(y.a,{color:"danger"},this.state.errorMessage),!this.state.isLoading&&!this.state.error&&this.state.hasData&&n.createElement("div",null,n.createElement(h.a,null,"Top 30 interactions"),n.createElement(P.a,{tabs:!0},n.createElement(D.a,null,n.createElement(N.a,{className:"1"===this.state.activeTab?"active":"",onClick:function(){e.toggle("1")}},"Highlights")),n.createElement(D.a,null,n.createElement(N.a,{className:"2"===this.state.activeTab?"active":"",onClick:function(){e.toggle("2")}},"Likes")),n.createElement(D.a,null,n.createElement(N.a,{className:"3"===this.state.activeTab?"active":"",onClick:function(){e.toggle("3")}},"Comments"))),n.createElement(T.a,{activeTab:this.state.activeTab},n.createElement(M.a,{tabId:"1"},n.createElement(f.a,null,n.createElement(g.a,{sm:"12"},n.createElement(z,{posts:this.state.list1})))),n.createElement(M.a,{tabId:"2"},n.createElement(f.a,null,n.createElement(g.a,{sm:"12"},n.createElement(z,{posts:this.state.list2})))),n.createElement(M.a,{tabId:"3"},n.createElement(f.a,null,n.createElement(g.a,{sm:"12"},n.createElement(z,{posts:this.state.list3})))))))}}]),t}(n.Component));x()(C.a);var J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!0,hasData:!1,isOpen:!1,chartOptionsAndData:{},error:!1,errorMessage:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"toggle",value:function(){this.state.isOpen||this.loadChart(),this.setState({isOpen:!this.state.isOpen})}},{key:"loadChart",value:function(){var e=this;fetch("".concat(L,"profile/getChart/").concat(this.props.profile.username)).then(function(t){return t.ok?t.json():(t.bodyUsed?t.json().then(function(t){e.setState({error:!0,errorMessage:t.message})}):e.setState({error:!0,errorMessage:t.statusText}),null)}).then(function(t){if(null!==t){var a={chart:{type:"spline",zoomType:"x",panning:!0,panKey:"shift",resetZoomButton:{position:{align:"left",verticalAlign:"top",x:0,y:-10}}},yAxis:[{labels:{style:{color:C.a.getOptions().colors[1]}},title:{text:"Following",style:{color:C.a.getOptions().colors[1]}},opposite:!0},{labels:{style:{color:C.a.getOptions().colors[3]}},title:{text:"Followed",style:{color:C.a.getOptions().colors[3]}},opposite:!0},{labels:{style:{color:C.a.getOptions().colors[5]}},title:{text:"Posts",style:{color:C.a.getOptions().colors[5]}},opposite:!0},{labels:{style:{color:C.a.getOptions().colors[7]}},title:{text:"Likes",style:{color:C.a.getOptions().colors[7]}}},{labels:{style:{color:C.a.getOptions().colors[9]}},title:{text:"Comments",style:{color:C.a.getOptions().colors[9]}},opposite:!0}],xAxis:{type:"datetime",showFirstLabel:!0},series:[{name:"Following",type:"spline",data:t.followArr,visible:!1,color:C.a.getOptions().colors[1]},{name:"Followed",type:"spline",data:t.followedArr,yAxis:1,color:C.a.getOptions().colors[3]},{name:"Posts",type:"spline",data:t.mediasArr,yAxis:2,color:C.a.getOptions().colors[5]},{name:"Likes",type:"spline",data:t.likesArr,yAxis:3,color:C.a.getOptions().colors[7]},{name:"Comments",type:"spline",data:t.commentsArr,yAxis:4,color:C.a.getOptions().colors[9]}],plotOptions:{spline:{marker:{enabled:!1}}},credits:{enabled:!1},exporting:{enabled:!1},title:{text:null},subtitle:{text:null}};e.setState({isLoading:!1,hasData:t.followArr.length>0||t.followedArr.length>0||t.mediasArr.length>0||t.likesArr.length>0||t.commentsArr.length>0,chartOptionsAndData:a})}else e.setState({isLoading:!1})})}},{key:"render",value:function(){var e=this;return n.createElement("div",{onClick:function(t){e.toggle(),t.preventDefault()}},this.props.children,n.createElement(E.a,{size:"lg",toggle:function(){return e.toggle()},isOpen:this.state.isOpen,fade:!0,keyboard:!0},n.createElement(v.a,{toggle:function(){return e.toggle()}},n.createElement("a",{href:"https://instagram.com/"+this.props.profile.username,target:"_new"},this.props.profile.fullName," ",n.createElement(k.c,{size:"0.8em"}))),n.createElement(b.a,null,this.state.isLoading&&!this.state.error&&n.createElement(F,null),!this.state.isLoading&&!this.state.hasData&&n.createElement(h.a,null,"No data available"),this.state.error&&n.createElement(y.a,{color:"danger"},this.state.errorMessage),!this.state.isLoading&&!this.state.error&&this.state.hasData&&n.createElement(A.a,{highcharts:C.a,options:this.state.chartOptionsAndData,callback:function(t){if(!e.state.isLoading&&e.state.hasData&&window.innerWidth<800)for(var a=0;a<t.yAxis.length;a++)t.yAxis[a].update({visible:!1})}}),!this.state.isLoading&&this.state.hasData&&n.createElement(W,{profile:this.props.profile})),n.createElement(O.a,null,n.createElement(m.a,{color:"default",onClick:function(){return e.toggle()}},"Close"))))}}]),t}(n.Component),U=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.props)!==JSON.stringify(e)}},{key:"render",value:function(){var e=this,t=this.props.profile,a=t.postsScrapped/t.mediaCount*100;a>100&&(a=100);var l="warning";return 100===a&&(l="success"),t.scrapping&&(l="info"),n.createElement(p.a,{color:t.isPrivate||t.notFound?"danger":""},n.createElement("span",{className:"float-right"},n.createElement(m.a,{outline:!0,color:"danger",size:"sm",disabled:this.props.profile.isFixed,onClick:function(){return e.props.removeProfile(e.props.profile.username)}},n.createElement(k.e,null))),n.createElement(J,{profile:t},n.createElement("div",{className:"profile-name"},n.createElement("a",{href:"#"+t.username},t.fullName?t.fullName:"loading..."),n.createElement("small",null,"@",t.username))),t.isPrivate||t.notFound?n.createElement(h.a,{color:"danger"},"(not found or private)"):"",n.createElement(f.a,null,n.createElement(g.a,{xs:"6",sm:"3"},n.createElement("small",null,"Followed:"),n.createElement("br",null),t.followedByCount.toLocaleString("pt-BR")," ",n.createElement("br",null),n.createElement(B,{value:t.followedByPercentage})),n.createElement(g.a,{xs:"6",sm:"3"},n.createElement("small",null,"Posts:"),n.createElement("br",null),t.mediaCount.toLocaleString("pt-BR"),"  ",n.createElement("br",null),n.createElement(B,{value:t.mediaPercentage})),n.createElement(g.a,{xs:"6",sm:"3"},n.createElement("small",null,"Likes:"),n.createElement("br",null),t.likeCount.toLocaleString("pt-BR"),"  ",n.createElement("br",null),n.createElement(B,{value:t.likePercentage})),n.createElement(g.a,{xs:"6",sm:"3"},n.createElement("small",null,"Comments:"),n.createElement("br",null),t.commentCount.toLocaleString("pt-BR"),"  ",n.createElement("br",null),n.createElement(B,{value:t.commentPercentage}))),n.createElement(d.a,{value:a,color:l,striped:t.scrapping,animated:t.scrapping}))}}]),t}(n.Component),R=(a(52),a(71)),_=a(72),V=a(75),K=a(73),Z=(a(53),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={isOpen:!1,username:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"updateInputValue",value:function(e){this.setState({username:e.target.value})}},{key:"saveProfile",value:function(e){if(""===this.state.username.split(" ").join(""))return alert("Please type the username");this.props.saveProfile(this.state.username),this.setState({username:""}),this.toggle(),e.preventDefault()}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this;return n.createElement("span",{onClick:function(t){e.toggle(),t.preventDefault()}},n.createElement("a",{href:"#addNew",className:"float"},n.createElement(k.d,{className:"my-float"})),n.createElement(E.a,{size:"md",toggle:function(){return e.toggle()},isOpen:this.state.isOpen,fade:!0,keyboard:!0},n.createElement(b.a,null,n.createElement(R.a,{onSubmit:function(t){e.saveProfile(t)}},n.createElement(_.a,null,n.createElement(V.a,{addonType:"prepend",className:"input-group-text"},n.createElement(k.f,null),"\xa0 add new @"),n.createElement(K.a,{placeholder:"instagram username",value:this.state.username,onChange:function(t){return e.updateInputValue(t)}})))),n.createElement(O.a,null,n.createElement(m.a,{color:"default",onClick:function(){return e.toggle()}},"Close"),n.createElement(m.a,{color:"success",onClick:function(t){e.saveProfile(t)}},"Save"))))}}]),t}(n.Component)),G=(a(54),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("div",{className:"loading"},n.createElement("div",{className:"loader"})))}}]),t}(n.Component)),H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={profiles:[],loading:!0},a.saveProfile=function(e){a.setState({loading:!0});var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e})};fetch(L+"profile/save",t).then(function(e){e.ok?a.listProfiles():e.json().then(function(e){alert(e.message)})})},a.removeProfile=function(e){if(window.confirm("Confirm this action?")){a.setState({loading:!0});fetch(L+"profile/"+e,{method:"DELETE"}).then(function(e){e.ok?a.listProfiles():e.json().then(function(e){alert(e.message)})})}},a.listProfiles=function(){fetch("".concat(L,"profile/listAll?_t=").concat((new Date).getTime())).then(function(e){return e.json()}).then(function(e){return a.setState({profiles:e,loading:!1})}).catch(function(e){return e})},a.openWebSocket=function(){if("WebSocket"in window){var e=window.location.protocol,t=L.substring(L.indexOf(":")+3);t=(0===(e+"").toLowerCase().indexOf("https")?"wss://":"ws://")+t;var n=new WebSocket(t);n.onopen=function(){console.log("Websocket connected!")},n.onmessage=function(e){try{var t=JSON.parse(e.data);t.message&&("new profile"!==t.message&&"removed profile"!==t.message||a.listProfiles()),console.log(e.data)}catch(n){}},n.onclose=function(){console.log("Websocket closed!"),setTimeout(a.openWebSocket,5e3)}}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(L),this.listProfiles(),this.openWebSocket(),setInterval(function(){return e.listProfiles()},5e3)}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(this.state.profiles)!==JSON.stringify(t.profiles)||this.state.loading!==t.loading}},{key:"render",value:function(){var e=this,t=this.state.profiles.map(function(t){return n.createElement(U,{key:t._id,profile:t,listProfiles:e.listProfiles,removeProfile:e.removeProfile})});return n.createElement("div",null,this.state.loading&&n.createElement(G,null),!this.state.loading&&n.createElement(u.a,null,t),!this.state.loading&&n.createElement(Z,{saveProfile:this.saveProfile}),!this.state.loading&&n.createElement("div",{className:"text-center"},n.createElement("small",null,"Developed by ",n.createElement("a",{href:"http://ivanvaladares.com",target:"_new"},"Ivan Valadares")," ",n.createElement("br",null),"Check the ",n.createElement("a",{href:"/api-docs",target:"_new"},"API docs"),n.createElement("br",null),"Get the source code at ",n.createElement("a",{href:"https://github.com/ivanvaladares/instagram-scrapper"},"github.com/ivanvaladares/instagram-scrapper"))))}}]),t}(n.Component);l.render(n.createElement(H,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.171b13fe.chunk.js.map